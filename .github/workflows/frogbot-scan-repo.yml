name: üê∏ Frogbot ‚Äì Scan Repository

on:
  workflow_dispatch:           # allow manual runs
  schedule:
    # 08:00 UTC = midnight PT (America/Los_Angeles) ‚Äì adjust if you like
    - cron: "0 8 * * *"

permissions:
  contents: read
  id-token: write              # for OIDC (recommended)
  security-events: write       # lets Frogbot publish code scanning alerts when enabled

jobs:
  scan-repository:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # Run Frogbot in "scan repository" mode
      - name: Run Frogbot (full repo scan)
        uses: jfrog/frogbot@v2
        with:
          oidc-provider-name: frogbot-integration
        env:
          # JFrog Platform connection (pick ONE auth method)
          JF_URL:           ${{ vars.JF_URL }}             # e.g. https://<your>.jfrog.io
          JF_ACCESS_TOKEN:  ${{ secrets.JF_ACCESS_TOKEN }} # preferred
          # or:
          # JF_USER:         ${{ secrets.JF_USER }}
          # JF_PASSWORD:     ${{ secrets.JF_PASSWORD }}

          # Git token - GitHub auto-provides this
          JF_GIT_TOKEN:     ${{ secrets.GITHUB_TOKEN }}

          # Optional tweaks
          # JF_PROJECT:       ${{ vars.JF_PROJECT }}        # use if you scope scans to a JFrog Project
          # JF_MIN_SEVERITY:  "Medium"                      # Low|Medium|High|Critical
          # JF_FAIL:          "TRUE"                        # fail the job on findings
          # JF_WORKING_DIR:   "."                           # change if you scan a subfolder
          # JF_PATH_EXCLUSIONS: "docs/**,**/*.md"           # comma-separated patterns
